
  
  <html>
  <head>
    <title>Canvas tutorial</title>
    <script type="text/javascript">

var rgb = 0;
var w = 33,h = 33;

function ccc(){
	var b;
	a = this.getContext('2d').fillStyle;
//	alert(a);
	if (a == '#cc0000')
		b = '#00ff00';
	else if (a == '#00ff00')
		b = '#0000bb';
	else if (a == '#0000bb')
		b = '#000000';
	else if (a == '#000000')
		b = '#cc0000';
	else
		b = '#cc0000';
  	this.getContext('2d').fillStyle=b;
  	this.getContext('2d').fillRect(0,0,w,h);

}
    
function generate_table() {
  var body = document.getElementsByTagName("body")[0];
  var tbl     = document.createElement("table");
  var tblBody = document.createElement("tbody");
  for (var j = 0; j < 31; j++) {
    var row = document.createElement("tr");
    for (var i = 0; i < 31; i++) {
      var cell = document.createElement("td");
      cell.height = h;
      cell.width = w;
      canvas = document.createElement("canvas");
      canvas.height = h;
      canvas.width = w;
      canvas.fillStyle='#000000';
      cell.appendChild(canvas);
      if ((j == 15)&&(i == 15))
        rgb = canvas.getContext('2d');
      else
     	canvas.onclick = ccc;
      row.appendChild(cell);
    }
    tblBody.appendChild(row);
  }
  tbl.appendChild(tblBody);
  body.appendChild(tbl);
  tbl.setAttribute("border", "0");
}

     
    var  cycle_count = 1;
    var LED_pwm = new Array(255,0,0); 
    var cycle_counter=255; 
     
    function draw()
    {

  	switch (cycle_count)
  	{

  case 1:
    var incColor = 1;
    var decColor = 0;
    var noColor = 2;
    break;
  case 2:
    var incColor = 2;
    var decColor = 1;
    var noColor = 0;
    break;
  case 3:
    var incColor = 0;
    var decColor = 2;
    varnoColor = 1;
    break;
	  }

  if (cycle_counter > 0){
    cycle_counter--;
    LED_pwm[decColor] -= 1;
    LED_pwm[incColor] += 1;
    LED_pwm[noColor] = 0;
  }
  else if (cycle_counter == 0){
    cycle_counter = 255;
    if (cycle_count != 3){
      cycle_count++;
    }

    else {
      cycle_count = 1;
    }
  }



//  	var rgb = document.getElementById('rgb');
  	//rgb.fillStyle=LED_pwm;
  	rgb.fillStyle='rgb(' + LED_pwm[0]+','+LED_pwm[1]+','+LED_pwm[2]+')';
  	rgb.fillRect(0,0,100,100);///////
}





    </script>
    <style type="text/css">
    </style>
  </head>
  <body onload="generate_table();window.setInterval(draw, 1);" background="noise.gif">
  </body>
</html>
